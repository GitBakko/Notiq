
> notiq-backend@1.0.0 dev
> tsx watch src/app.ts

{"level":30,"time":1764348058351,"pid":37456,"hostname":"PC-SVIL-STE-22","msg":"Server listening at http://127.0.0.1:3001"}

  Hocuspocus v3.4.0 running at:

  > HTTP: http://0.0.0.0:1234
  > WebSocket: ws://0.0.0.0:1234

  Extensions:
  - Logger
  - Database

  Ready.

Hocuspocus running on port 1234
{"level":30,"time":1764348058351,"pid":37456,"hostname":"PC-SVIL-STE-22","msg":"Server listening at http://192.168.3.129:3001"}
{"level":30,"time":1764348058351,"pid":37456,"hostname":"PC-SVIL-STE-22","msg":"Server listening at http://172.18.224.1:3001"}
{"level":30,"time":1764348058351,"pid":37456,"hostname":"PC-SVIL-STE-22","msg":"Server listening at http://172.20.224.1:3001"}
{"level":30,"time":1764348584979,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-1","req":{"method":"OPTIONS","url":"/api/auth/register","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348584983,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-1","res":{"statusCode":204},"responseTime":3.599299967288971,"msg":"request completed"}
{"level":30,"time":1764348584984,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-2","req":{"method":"POST","url":"/api/auth/register","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585079,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-2","res":{"statusCode":200},"responseTime":94.867899954319,"msg":"request completed"}
{"level":30,"time":1764348585109,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-3","req":{"method":"OPTIONS","url":"/api/notes?","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585110,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-3","res":{"statusCode":204},"responseTime":0.3085000514984131,"msg":"request completed"}
{"level":30,"time":1764348585113,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-4","req":{"method":"GET","url":"/api/notes?","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348585116,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-5","req":{"method":"OPTIONS","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585116,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-5","res":{"statusCode":204},"responseTime":0.32019996643066406,"msg":"request completed"}
{"level":30,"time":1764348585117,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-6","req":{"method":"GET","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585123,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-4","res":{"statusCode":200},"responseTime":10.546200037002563,"msg":"request completed"}
{"level":30,"time":1764348585136,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-6","res":{"statusCode":200},"responseTime":18.110099971294403,"msg":"request completed"}
{"level":30,"time":1764348585153,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-7","req":{"method":"GET","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585156,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-7","res":{"statusCode":200},"responseTime":2.6356000304222107,"msg":"request completed"}
{"level":30,"time":1764348585173,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-8","req":{"method":"OPTIONS","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585174,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-8","res":{"statusCode":204},"responseTime":0.23139995336532593,"msg":"request completed"}
{"level":30,"time":1764348585174,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-9","req":{"method":"GET","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585178,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-9","res":{"statusCode":200},"responseTime":3.772100031375885,"msg":"request completed"}
{"level":30,"time":1764348585179,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-a","req":{"method":"GET","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348585181,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-a","res":{"statusCode":200},"responseTime":2.1173999905586243,"msg":"request completed"}
{"level":30,"time":1764348585189,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-b","req":{"method":"OPTIONS","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348585190,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-b","res":{"statusCode":204},"responseTime":0.2444000244140625,"msg":"request completed"}
{"level":30,"time":1764348585190,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-c","req":{"method":"GET","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348585194,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-c","res":{"statusCode":200},"responseTime":3.231100022792816,"msg":"request completed"}
{"level":30,"time":1764348585194,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-d","req":{"method":"GET","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585197,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-d","res":{"statusCode":200},"responseTime":2.360599994659424,"msg":"request completed"}
{"level":30,"time":1764348585411,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-e","req":{"method":"POST","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348585420,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-e","res":{"statusCode":200},"responseTime":8.876399993896484,"msg":"request completed"}
[2025-11-28T16:49:45.534Z] Upgrading connection ÔÇª
[2025-11-28T16:49:45.550Z] Upgrading connection ÔÇª
[2025-11-28T16:49:45.623Z] New connection to "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530".
Hocuspocus: onAuthenticate called
[2025-11-28T16:49:45.645Z] Loaded document "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530".
[2025-11-28T16:49:47.848Z] Document "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530" changed.
[2025-11-28T16:49:49.853Z] Store "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530".
Hocuspocus: storing dbb14faf-4c95-43e4-a1bf-ff6b8e76f530 {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Just text content"}]}]}
[2025-11-28T16:49:50.895Z] Connection to "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530" closed.
{"level":30,"time":1764348591139,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-f","req":{"method":"OPTIONS","url":"/api/notes?","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348591139,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-f","res":{"statusCode":204},"responseTime":0.3504999876022339,"msg":"request completed"}
{"level":30,"time":1764348591140,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-g","req":{"method":"OPTIONS","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591140,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-g","res":{"statusCode":204},"responseTime":0.21090000867843628,"msg":"request completed"}
{"level":30,"time":1764348591141,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-h","req":{"method":"GET","url":"/api/notes?","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591142,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-i","req":{"method":"GET","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348591145,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-i","res":{"statusCode":200},"responseTime":3.4905999898910522,"msg":"request completed"}
{"level":30,"time":1764348591151,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-h","res":{"statusCode":200},"responseTime":9.565099954605103,"msg":"request completed"}
{"level":30,"time":1764348591155,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-j","req":{"method":"GET","url":"/api/notebooks","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591158,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-j","res":{"statusCode":200},"responseTime":2.673799991607666,"msg":"request completed"}
[2025-11-28T16:49:51.227Z] Upgrading connection ÔÇª
[2025-11-28T16:49:51.246Z] Upgrading connection ÔÇª
[2025-11-28T16:49:51.337Z] New connection to "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530".
Hocuspocus: onAuthenticate called
[2025-11-28T16:49:51.341Z] Loaded document "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530".
Hocuspocus: fetch dbb14faf-4c95-43e4-a1bf-ff6b8e76f530 content: {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Just text content"}]}
Hocuspocus: Failed to parse note content TypeError: Cannot read properties of undefined (reading 'name')
    at <anonymous> (D:\Develop\AI\Notiq\backend\node_modules\@tiptap\core\src\helpers\flattenExtensions.ts:14:27)
    at Array.map (<anonymous>)
    at flattenExtensions (D:\Develop\AI\Notiq\backend\node_modules\@tiptap\core\src\helpers\flattenExtensions.ts:12:8)
    at resolveExtensions (D:\Develop\AI\Notiq\backend\node_modules\@tiptap\core\src\helpers\resolveExtensions.ts:13:45)
    at Object.getSchema (D:\Develop\AI\Notiq\backend\node_modules\@tiptap\core\src\helpers\getSchema.ts:9:30)
    at Tiptap.toYdoc (D:\Develop\AI\Notiq\backend\node_modules\@hocuspocus\transformer\src\Tiptap.ts:30:4)
    at Object.fetch (D:\Develop\AI\Notiq\backend\src\hocuspocus.ts:98:43)
    at async Database.onLoadDocument (D:\Develop\AI\Notiq\backend\node_modules\@hocuspocus\extension-database\src\Database.ts:45:18)
    at async Hocuspocus.loadDocument (D:\Develop\AI\Notiq\backend\node_modules\@hocuspocus\server\src\Hocuspocus.ts:360:4)
    at async Hocuspocus.createDocument (D:\Develop\AI\Notiq\backend\node_modules\@hocuspocus\server\src\Hocuspocus.ts:313:16)
Hocuspocus: Content was: {"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"Just text content"}]}]}
{"level":30,"time":1764348591376,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-k","req":{"method":"OPTIONS","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591376,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-k","res":{"statusCode":204},"responseTime":0.2093999981880188,"msg":"request completed"}
{"level":30,"time":1764348591377,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-l","req":{"method":"GET","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591380,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-l","res":{"statusCode":200},"responseTime":2.8705999851226807,"msg":"request completed"}
{"level":30,"time":1764348591388,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-m","req":{"method":"GET","url":"/api/tags","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":56740},"msg":"incoming request"}
{"level":30,"time":1764348591389,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-n","req":{"method":"OPTIONS","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348591389,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-n","res":{"statusCode":204},"responseTime":0.25279998779296875,"msg":"request completed"}
{"level":30,"time":1764348591390,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-o","req":{"method":"GET","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348591391,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-m","res":{"statusCode":200},"responseTime":3.0497999787330627,"msg":"request completed"}
{"level":30,"time":1764348591397,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-o","res":{"statusCode":200},"responseTime":6.657400012016296,"msg":"request completed"}
{"level":30,"time":1764348591430,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-p","req":{"method":"GET","url":"/api/notes","host":"127.0.0.1:3001","remoteAddress":"127.0.0.1","remotePort":63342},"msg":"incoming request"}
{"level":30,"time":1764348591436,"pid":37456,"hostname":"PC-SVIL-STE-22","reqId":"req-p","res":{"statusCode":200},"responseTime":5.87720000743866,"msg":"request completed"}
[2025-11-28T16:49:56.395Z] Connection to "dbb14faf-4c95-43e4-a1bf-ff6b8e76f530" closed.
